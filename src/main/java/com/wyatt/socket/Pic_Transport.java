package com.wyatt.socket;

import org.junit.Test;

import java.io.*;
import java.net.InetAddress;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.UnknownHostException;

/**
 * Created by ASUS on 2018/12/1.
 */
public class Pic_Transport {

    @Test
    public void pic_Client() throws Exception {
        InetAddress address=InetAddress.getByName("127.0.0.1");
        Socket socket=new Socket(address,8989);
        InputStream in=socket.getInputStream();
//        BufferedInputStream inputStream=new BufferedInputStream(in);
//        System.out.println(inputStream.read());
        BufferedReader reader=new BufferedReader(new InputStreamReader(in));
        System.out.println(reader.readLine());

        in.close();
        reader.close();
        socket.close();
    }

    @Test
    public void pic_Server() throws Exception{
        ServerSocket serverSocket=new ServerSocket(8989);
        byte[] buffer=new byte[1024];
        Socket socket=serverSocket.accept();
        String ip=socket.getInetAddress().getHostAddress();
        int port=socket.getPort();
        System.out.println("服务器收到连接请求："+ip+"::"+port);
        OutputStream out=socket.getOutputStream();
        InputStream in=new FileInputStream("1.PNG");
        int len=0;
        while ((len=in.read(buffer))!=-1){
            out.write(buffer,0,len);
        }
        out.close();
        in.close();

        socket.close();
        serverSocket.close();


    }
}
