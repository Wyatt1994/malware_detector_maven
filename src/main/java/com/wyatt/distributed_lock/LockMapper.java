package com.wyatt.distributed_lock;

import org.apache.ibatis.annotations.*;

/**
 * Created by ASUS on 2018/11/26.
 */

@Mapper
public interface LockMapper {

    @Select("select count(1) from distributed_lock where lock_name=#{lockName}")
    public int get(@Param("lockName") String lockName);

    @Insert("insert into distributed_lock(lock_name) values (#{lockName})")
    public void insert(@Param("lockName") String lockName);

    @Delete("delete from distributed_lock where lock_name=#{lockName}")
    public void delete(@Param("lockName")String lockName);

    //Mysql使用行级锁
    @Select("select count(1) from distributed_lock where  lock_name=#{lockName} for update")
    public int getForUpdate(@Param("lockName")String lockName);
}
